<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Route & Charge Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }
    
    input[type="text"] {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      box-sizing: border-box;
    }
    
    input[type="text"]:focus {
      border-color: #4CAF50;
      outline: none;
    }
    
    button {
      background-color: #4CAF50;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      margin-top: 10px;
    }
    
    button:hover {
      background-color: #45a049;
    }
    
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    
    #route-result {
      margin-top: 30px;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 5px;
      border-left: 4px solid #4CAF50;
    }
    
    .route-option {
      background: white;
      margin: 10px 0;
      padding: 15px;
      border-radius: 5px;
      border: 1px solid #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .route-option:hover {
      border-color: #4CAF50;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .route-option.selected {
      border-color: #4CAF50;
      background-color: #f0f8f0;
    }
    
    .route-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .route-detail {
      margin: 5px 0;
      color: #666;
    }
    
    .route-charge {
      font-size: 18px;
      font-weight: bold;
      color: #4CAF50;
    }
    
    .shortest-badge {
      background-color: #ff9800;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }
    
    #map-container {
      margin-top: 30px;
      height: 400px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    #map {
      height: 100%;
      width: 100%;
    }
    
    .loading {
      text-align: center;
      color: #666;
      font-style: italic;
    }
    
    .error {
      color: #f44336;
      background-color: #ffebee;
      padding: 10px;
      border-radius: 5px;
      border-left: 4px solid #f44336;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
</head>
<body>
  <div class="container">
    <h1>üöö Route & Charge Calculator</h1>

    <form id="route-form">
      <div class="form-group">
        <label for="start-location">üìç Start Location:</label>
        <input type="text" id="start-location" name="start-location" placeholder="Enter start location (e.g., Yankin Township, Yangon)" autocomplete="off" required />
      </div>
      
      <div class="form-group">
        <label for="end-location">üéØ End Location:</label>
        <input type="text" id="end-location" name="end-location" placeholder="Enter destination (e.g., Lanmadaw Township, Yangon)" autocomplete="off" required />
      </div>
      
      <button type="submit" id="calculate-btn">Calculate Routes</button>
    </form>

    <div id="route-result"></div>

    <div id="map-container" style="display: none;">
      <div id="map"></div>
    </div>
  </div>

  <!-- Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <!-- Polyline decoder -->
  <script src="https://cdn.jsdelivr.net/npm/@mapbox/polyline@1.1.1/src/polyline.min.js"></script>
  <!-- Google Places API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC58JRaLlXPfWGzU2POxSsHJo1lBUSIGCU&libraries=places" async defer></script>
  
  <script>
    let map;
    let routeData = null;
    let selectedRoute = null;

    // Initialize the form
    document.getElementById('route-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const startLocation = document.getElementById('start-location').value.trim();
      const endLocation = document.getElementById('end-location').value.trim();
      
      if (!startLocation || !endLocation) {
        alert('Please enter both start and end locations');
        return;
      }
      
      await calculateRoute(startLocation, endLocation);
    });

    async function calculateRoute(start, end) {
      const resultDiv = document.getElementById('route-result');
      const calculateBtn = document.getElementById('calculate-btn');
      
      // Show loading state
      calculateBtn.disabled = true;
      calculateBtn.textContent = 'Calculating...';
      resultDiv.innerHTML = '<div class="loading">üîÑ Calculating routes...</div>';
      
      try {
        // Mock API response based on your provided data
        const mockResponse = {
          routes: [
            {
              start: start,
              end: end,
              distance_km: "10.24",
              distance_miles: "6.37",
              duration: "23 mins",
              duration_minutes: 23,
              charge: 10350,
              polyline: "spveBen}iQcQlC_AFqBJkAJaBXm@NUFd@tA`AxCh@~Ax@|Bl@tAfCdFJb@hAtBx@|AbA|BJf@H\\DDB\\NtAFr@PnApCpLd@`BjBRnF`@`Jn@FFNDtPbAhGf@rEV~AC~@GpAQnAYr@WdCoAVM|CyAv@a@TUpBeAbCsAXOH@H?^Kj@Gh@@hBNhANPE~I|@xALvCL|AEj@B|AExEOlCMl@ClA?dEd@NBlAp@VZZNd@^\\Rx@v@TLbAZf@DZAr@MhBcAfAi@h@Qx@Uf@WbAw@r@Yv@MZChABxABZFb@P`@PHBHJr@d@r@MLGHMPcAb@iA@I?K`AgB^w@`@aAR]^_@|@g@RMd@QHBZCd@@f@LnAh@~CxAfAd@xA`@bFtAzBj@jCb@RPNDAb@k@pCsAvFYdAKt@Cp@Bx@PfAv@vBp@fB\\|A\\`ADj@J`ABjBP|BL~@`@dBJ~@F|AIh@UNKX@XLTTLNBNCVOJW?M?Ed@g@bAu@dAq@`Bu@~Ag@`BYh@ChBE~@K~DeAnC}@hBk@jDoAtBu@Vl@pCfHd@dAlCIvBIhCEnBBrLL|BBvABjE?GhEGlFIjHOtLChCfADdDDjB??jA?@"
            },
            {
              start: start,
              end: end,
              distance_km: "10.04",
              distance_miles: "6.24",
              duration: "25 mins",
              duration_minutes: 25,
              charge: 11250,
              polyline: "spveBen}iQvE_A|@Wa@kD_@cCi@{DOiBrDm@xKsBlIcBzIkBdCi@f@E`CSdQ{@bA@hAIzHc@tDY`BEpDFtFX^BtBVlAVhCv@nBr@nAh@r@Xx@R?b@KlCD`@Cd@QzHCn@C`CBt@Nz@d@pBFTAV\\~AVnA\\bCL`AP`AJPDZFbARxBLzAV`B^tBd@~BhAjDr@rB\\~@f@~@Xd@b@Xn@\\XNz@XhAh@b@\\n@t@nAbCr@tAv@`BTh@D^t@Qp@YpAcAl@Wf@I`ACdB@f@BZJ\\Pb@\\VLTFTAr@MLGHMPcAb@iA@I?K`AgB^w@`@aAR]^_@|@g@RMd@QHBZCd@@f@LnAh@~CxAfAd@xA`@bFtAzBj@jCb@RPNDAb@k@pCsAvFYdAKt@Cp@Bx@PfAhB~E\\|A\\`ADj@J`ABjBP|BL~@`@dBJ~@F|AIh@UNKX@XLTTL^?VOJW?M?Ed@g@bAu@dAq@`Bu@~Ag@`BYh@ChBE~@K~DeAnC}@hBk@jDoAtBu@Vl@pCfHd@dAlCIvBIhCEnBBrLL|BBvABjE?GhEGlFIjHGlGGfDChCfADdDDjB??jA?@"
            },
            {
              start: start,
              end: end,
              distance_km: "10.08",
              distance_miles: "6.26",
              duration: "25 mins",
              duration_minutes: 25,
              charge: 11250,
              polyline: "spveBen}iQcQlC_AFqBJkAJaBXm@NUFd@tA`
